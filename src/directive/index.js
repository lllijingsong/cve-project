import Vue from 'vue'

Vue.directive("moveDrag", {
    bind(el) {
        const dragDom = el
        dragDom.onmousedown = function(e) {
            if (e.target.className === 'title') {
                const disX = e.clientX - dragDom.offsetLeft
                const disY = e.clientY - dragDom.offsetTop
                document.onmousemove = function (e) {
                    let left = e.clientX - disX
                    let top = e.clientY - disY
                    dragDom.style.left = left < 0 ? 0 : left + 'px'
                    dragDom.style.top = top < 0 ? 0 : top + 'px'
                    e.preventDefault()
                }
                document.onmouseup = function (e) {
                    document.onmousemove = null
                    document.onmouseup = null
                    e.preventDefault()
                }
            }
            e.preventDefault()
        }
    }
})